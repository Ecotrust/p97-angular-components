angular.module("vpApi.services",[]).factory("vpApi",["$http",function(t){function n(n,o,e){console.log("I should log in");var u=c+"authenticate/";r.username=n.username;var a={Authorization:"Token "+r.token};t.post(u,n,a).success(function(t,n){r.token=t.token,localStorage.setItem("token",t.token),o(t,n)}).error(function(t,n){e(t,n)})}function o(n,o,e,u){var a=c+n+"/",i={headers:{Authorization:"Token "+r.token}};t.get(a,i).success(function(t,n){e(t,n)}).error(function(t,n){u(t,n)})}function e(n,o,e,u){{var a=c+n+"/";({headers:{Authorization:"Token "+r.token}})}t({url:a,method:"POST",data:o,headers:{Authorization:"Token "+r.token}}).success(function(t,n){e(t,n)}).error(function(t,n){u(t,n)})}var r={username:null,token:null,profile:null};localStorage.getItem("token")&&(r.token=localStorage.getItem("token"));var c="http://localhost:8000/api/v2/";return{apiBase:c,authenticate:n,user:r,fetch:o,post:e}}]).factory("FormStack",["vpApi",function(t){function n(n){t.fetch(e,{},function(t,o){r=t,n(t,o)},function(t,n){console.log("Failed to fetch "+e+". Returned Status: "+n),console.log(t)})}function o(t,n){return res=_.find(r,function(o){return o[t]===n}),res||[]}var e="pforms/formstack",r=[];return{load:n,get:o,objects:r}}]).factory("Form",["vpApi",function(){function t(t,n,o){return console.log("getById"),res=_.find(t,function(t){return t[n]===o}),res||[]}var n=[];return{get:t,objects:n}}]).factory("Question",["vpApi",function(t){function n(n){t.fetch(c,{},function(t,o){u=t,n(t,o)},function(t,n){console.log("Failed to fetch "+c+". Returned Status: "+n),console.log(t)})}function o(n,o){t.post(c,n,function(t,n){o(t,n)},function(t,n){console.log("Failed to create "+c+". Returned Status: "+n),console.log(t),o(t,n)})}function e(t,n){return res=_.find(u,function(o){return o[t]===n}),res||[]}function r(t){return t.options={placeholder:""},t.type=parseInt(t.type),t}var c="pforms/question",u=[];return{load:n,create:o,get:e,objects:u,cleanData:r}}]);