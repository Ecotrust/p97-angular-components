angular.module("vpApi.services",[]).factory("vpApi",["$http",function(t){function o(o,n,e){console.log("I should log in");var u=c+"authenticate/";r.username=o.username;var a={Authorization:"Token "+r.token};t.post(u,o,a).success(function(t,o){r.token=t.token,localStorage.setItem("token",t.token),n(t,o)}).error(function(t,o){e(t,o)})}function n(o,n,e,u){var a=c+o+"/",i={headers:{Authorization:"Token "+r.token}};t.get(a,i).success(function(t,o){e(t,o)}).error(function(t,o){u(t,o)})}function e(o,n,e,u){{var a=c+o+"/";({headers:{Authorization:"Token "+r.token}})}t({url:a,method:"POST",data:n,headers:{Authorization:"Token "+r.token}}).success(function(t,o){e(t,o)}).error(function(t,o){u(t,o)})}var r={username:null,token:null,profile:null};localStorage.getItem("token")&&(r.token=localStorage.getItem("token"));var c="http://localhost:8000/api/v2/";return{apiBase:c,authenticate:o,user:r,fetch:n,post:e}}]).factory("FormStack",["vpApi",function(t){function o(o){t.fetch(e,{},function(t,n){r=t,o(t,n)},function(t,o){console.log("Failed to fetch "+e+". Returned Status: "+o),console.log(t)})}function n(t,o){return res=_.find(r,function(n){return n[t]===o}),res||[]}var e="pforms/formstack",r=[];return{load:o,get:n,objects:r}}]).factory("Question",["vpApi",function(t){function o(o){t.fetch(c,{},function(t,n){u=t,o(t,n)},function(t,o){console.log("Failed to fetch "+c+". Returned Status: "+o),console.log(t)})}function n(o,n){t.post(c,o,function(t,o){n(t,o)},function(t,o){console.log("Failed to create "+c+". Returned Status: "+o),console.log(t),n(t,o)})}function e(t,o){return res=_.find(u,function(n){return n[t]===o}),res||[]}function r(t){return t.options={placeholder:""},t.type=parseInt(t.type),t}var c="pforms/question",u=[];return{load:o,create:n,get:e,objects:u,cleanData:r}}]);