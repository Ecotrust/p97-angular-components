angular.module("p97.controllers").controller("LoginCtrl",function(e,r,o,a,n){console.log("[LoginCtrl]"),e.user=o.user,e.config=n,e.loginData={username:"",password:"",stayLoggedIn:n.stayLoggedIn},e.authenticate=function(a){o.authenticate(e.loginData,function(s,l){1===l?(Raven.setUser({username:o.user.username,email:o.user.profile.email,id:o.user.profile.user,token:o.token,app_slug:o.appSlug}),Raven.captureMessage("User autenticated",{extra:o.user,tags:{level:"log"}}),r.go(a)):2===l?(e.loginData={username:"",password:"",stayLoggedIn:n.stayLoggedIn},e.errorMsg="You do not have access to this application."):3===l&&(e.errorMsg="We could not find the application.")},function(r,o){e.loginData={username:"",password:"",stayLoggedIn:n.stayLoggedIn},e.errorMsg=0===o?"Could not connect to server. Please try again.":400===o?"Invalid username or password. Please try again.":"Unkown error. Please try again.",console.log("Authentication Status"),console.log(o),console.log(r)})}}),angular.module("p97.controllers").controller("ProfileCtrl",function(e,r,o,a,n,s,l,t){console.log("[ProfileCtrl]"),e.user=o.user,e.config=t,e.$vpApi=o,e.showProfileForm=!1,e.showOrgForm=!1,e.current={profile:{},org:{}},e.master={profile:{},org:{}},e.loadProfile=function(){e.master.profile.id=e.user.profile.id,e.master.profile.email=e.user.profile.email,e.master.profile.firstName=e.user.profile.first_name,e.master.profile.lastName=e.user.profile.last_name,e.master.profile.username=e.user.profile.username,e.master.profile.cellNumber=e.user.profile.preferences.cellNumber,e.current.profile=angular.copy(e.master.profile)},e.loadProfile(),e.loadOrg=function(){e.master.org.name=e.user.profile.orgs[0].name,e.master.org.options=e.user.profile.orgs[0].options,e.current.org=angular.copy(e.master.org)},e.loadOrg(),e.submit=function(r){if(l.show(),e.submitted=!0,!r.$invalid){var o,a;"profileForm"===r.$name?(o=n,a=e.current.profile):"orgForm"===r.$name&&(o=s,a=e.current.org),o.update(a).then(function(){"profileForm"===r.$name?(e.loadProfile(),e.showProfileForm=!1):"orgForm"===r.$name&&(e.loadOrg(),e.showOrgForm=!1),l.hide()},function(){console.log("There were errors."),l.hide()})}},e.wtf={},e.wtf.countries=[{name:"USA",code:"USA"},{name:"Indonesia",code:"IND"},{name:"Country 2",code:"CT2"}]});