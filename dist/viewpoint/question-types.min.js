angular.module("p97.questionTypes",["monospaced.elastic","google.places"]),angular.module("p97.questionTypes").directive("qtLoader",function(e){return{restrict:"E",scope:{questions:"="},template:"<div class='row blocks'></div>",controller:function(t,n){t.addDirectives=function(){_.each(t.questions,function(o,r){o.form={show:!0},"undefined"==typeof o.value&&(o.value="");var l='<div class="question '+o.type+'" '+o.type+' question="questions['+r+']" value="questions['+r+'].value" control="questions['+r+'].form" ng-show="questions['+r+'].form.show"></div>',a=e(l)(t);n.parent().append(a)})},t.addDirectives()}}}),angular.module("p97.questionTypes").directive("datetime",["$http","$templateCache","$compile","$sce",function(e,t,n,o){return{template:"",restrict:"EA",scope:{question:"=",value:"=",control:"="},link:function(r,l){if(r.question){var a=r.question.options;r.errors=[],r.getContentUrl=function(){return r.question.options.widget?BASE_TEMPLATE_URL+"datetime/templates/"+r.question.options.widget+".html":BASE_TEMPLATE_URL+"datetime/templates/"+platform+"/datetime.html"},r.renderHtml=function(e){return o.trustAsHtml(e)},r.internalControl=r.control||{},r.internalControl.validate_answer=function(){r.errors=[];var e=a.datejs_format||"MM/dd/yyyy HH:mm:ss",t=Date.parseExact(r.value,e);return a.required===!0?((null===t||isNaN(t))&&r.errors.push("Invalid format."),0===r.value.length&&r.errors.push("This field is required")):r.value.length>0&&(null===t||0/0===t)&&r.errors.push("Invalid format."),0===r.errors.length},r.internalControl.clean_answer=function(){},e.get(r.getContentUrl(),{cache:t}).success(function(e){var t=l.html(e).contents();n(t)(r)})}}}}]),angular.module("p97.questionTypes").directive("number",["$http","$templateCache","$compile","$sce",function(e,t,n,o){return{template:"",restrict:"EA",scope:{question:"=",value:"=",control:"="},link:function(r,l){if(r.question){var a;isNumber=function(e){return""===e?!1:!isNaN(e)},r.setBlock=function(){a=r.question.options,r.errors=[],r.value=r.question.value,r.dummyValue=r.value},r.setBlock(),r.getContentUrl=function(){return r.question.options.widget?BASE_TEMPLATE_URL+"number/templates/"+r.question.options.widget+".html":BASE_TEMPLATE_URL+"number/templates/"+platform+"/number.html"},r.renderHtml=function(e){return o.trustAsHtml(e)},r.internalControl=r.control||{},r.internalControl.validate_answer=function(){if(r.errors=[],(!isNumber(r.value)||null==r.value)&&a.required&&a.required===!0)return r.errors.push("input must be a number"),!1;if(null!==r.value&&void 0!==r.value){if(!(""===r.value||isNumber(r.value)||a.required&&a.required!==!1))return r.errors.push("input must be a number"),!1;a.min&&isNumber(a.min)&&r.value<a.min&&r.errors.push("value must not be less than "+a.min),a.max&&isNumber(a.max)&&r.value>a.max&&r.errors.push("value must not be more than "+a.max)}return 0===r.errors.length},r.internalControl.clean_answer=function(){},r.$watch("dummyValue",function(e){r.value=isNumber(e)?parseFloat(e):e?e:""}),e.get(r.getContentUrl(),{cache:t}).success(function(e){var t=l.html(e).contents();n(t)(r)}),r.$on("reset-block",function(){console.log("[number] reset-block"),r.setBlock()})}}}}]),angular.module("p97.questionTypes").directive("textarea",["$http","$templateCache","$compile","$sce",function(e,t,n,o){return{template:"",restrict:"EA",scope:{question:"=",value:"=",control:"="},link:function(r,l){if(r.getContentUrl=function(){return r.question.options.widget?BASE_TEMPLATE_URL+"textarea/templates/"+r.question.options.widget+".html":BASE_TEMPLATE_URL+"textarea/templates/"+platform+"/textarea.html"},r.renderHtml=function(e){return o.trustAsHtml(e)},r.question){var a=r.question.options;r.errors=[],r.char_count=0,r.word_count=0,r.internalControl=r.control||{},r.internalControl.validate_answer=function(){if(r.errors=[],null===r.value&&(r.value=""),a.min_word&&r.word_count<a.min_word&&r.errors.push("You must have at least "+a.min_word+" words. You have "+r.word_count),a.max_word){var e=a.max_count||500;r.word_count>e?r.errors.push("You can have up to "+e+" words. You currently have "+r.word_count):r.word_count>a.max_word&&r.errors.push("You can only have "+a.max_word+" words. You have "+r.word_count)}return!a.min_word&&a.min_char&&r.char_count<a.min_char&&r.errors.push("You must have at least "+a.min_char+" characters. You have "+r.char_count),!a.max_word&&a.max_char&&r.char_count>a.max_char&&r.errors.push("You can only have "+a.max_char+" characters. You have "+r.char_count),0===r.errors.length},r.internalControl.clean_answer=function(){},r.$watch("value",function(e){if(e){var t,n=e.length;t=0===n?0:r.value.split(" ").length||0,r.char_count=n,r.word_count=t}}),e.get(r.getContentUrl(),{cache:t}).success(function(e){var t=l.html(e).contents();n(t)(r)})}}}}]),angular.module("p97.questionTypes").directive("yesNo",["$http","$templateCache","$compile","$sce",function(e,t,n,o){return{template:"",restrict:"EA",scope:{question:"=",value:"=",control:"="},link:function(r,l){if(r.getContentUrl=function(){return r.question.options.widget?BASE_TEMPLATE_URL+"yes-no/templates/"+r.question.options.widget+".html":BASE_TEMPLATE_URL+"yes-no/templates/"+platform+"/yes-no.html"},r.renderHtml=function(e){return o.trustAsHtml(e)},r.question){var a=r.question.options;r.errors=[],r.internalControl=r.control||{},r.internalControl.validate_answer=function(){r.errors=[],a.required&&a.required===!0&&null===r.value&&r.errors.push("This field is required")},r.internalControl.clean_answer=function(){null===r.value&&(r.value=!1)},e.get(r.getContentUrl(),{cache:t}).success(function(e){var t=l.html(e).contents();n(t)(r)})}}}}]),angular.module("p97.questionTypes").directive("singleSelect",["$http","$templateCache","$compile","$injector","$sce",function(e,t,n,o,r){if(o.has("$ionicPopup"))var l=o.get("$ionicPopup");return{template:"",restrict:"EA",scope:{question:"=",value:"=",control:"="},link:function(o,a){if(o.question){var u=/^[A-Za-z\d() _.,-]*$/,i=o.question.options;o.setBlock=function(){if(o.errors=[],o.localChoices=angular.copy(o.question.choices),o.obj={otherValue:null},1===o.question.choices.length&&(o.value=o.question.choices[0].value),i.allow_other>0){var e={verbose:"Other",value:"other"};o.localChoices.push(e)}},o.setBlock(),o.getContentUrl=function(){return o.question.options.widget?BASE_TEMPLATE_URL+"single-select/templates/"+o.question.options.widget+".html":BASE_TEMPLATE_URL+"single-select/templates/"+platform+"/checkbox-single.html"},o.renderHtml=function(e){return r.trustAsHtml(e)},o.changeSelected=function(e){_.each(o.localChoices,function(t){t!==e?t.checked=!1:o.inputValue=t.checked===!0?t.value:""})},o.checkPreviousAnswer=function(){if(o.value&&""!==o.value){if(choiceValues=_.pluck(o.localChoices,"value"),!_.contains(choiceValues,o.value)){var e={verbose:"User Entered: "+o.value,value:o.value};o.localChoices.splice(o.localChoices.length-1,0,e)}o.inputValue=o.value;var t=_.find(o.localChoices,{value:o.inputValue});t.checked=!0}},o.internalControl=o.control||{},o.internalControl.validate_answer=function(){return o.errors=[],i.required&&i.required===!0&&null===o.value&&o.errors.push("This field is required"),u.test(o.value)||o.errors.push("Your 'Other' input is invalid. Please try again without using special characters or symbols"),"other"===o.inputValue&&(o.otherValue&&null!==o.otherValue||o.errors.push("You selected 'Other'. It cannot be blank. Please fill in a response or select another choice")),0===o.errors.length},o.internalControl.clean_answer=function(){},o.otherInputModal=function(){l.show({template:'<input type="text" ng-model="obj.otherValue">',title:"Other Option",scope:o,subTitle:"Please enter your input below",buttons:[{text:"Cancel",onTap:function(){o.cancelOther()}},{text:"<b>Confirm</b>",type:"button-positive",onTap:function(){if(0==o.otherValueCheck())return!1;_.each(o.localChoices,function(e){return"User Entered:"===e.verbose.substring(0,13)&&(o.localChoices=_.reject(o.localChoices,e)),o.localChoices});var e={verbose:"User Entered: "+o.obj.otherValue,value:o.obj.otherValue,checked:!0};o.localChoices.splice(o.localChoices.length-1,0,e),o.localChoices[o.localChoices.length-1].checked=!1,o.inputValue=o.obj.otherValue,o.obj.otherValue=""}}]})},e.get(o.getContentUrl(),{cache:t}).success(function(e){var t=a.html(e).contents();n(t)(o)}),o.$watch("inputValue",function(e){"other"===e?o.otherInputModal():o.value=e}),o.otherValueCheck=function(){if(o.obj.otherValue.length>0){if(localContains=_.some(o.localChoices,function(e){return e.value==o.obj.otherValue}))return l?l.alert({title:"Duplicate Entries",template:"You have typed a duplicate answer. Please try again."}):alert("You have typed a duplicate answer. Please try again."),o.obj.otherValue="",o.cancelOther(),!1;if(o.obj.otherValue.length>o.question.options.other_max_length)return l?l.alert({title:"Too long",template:"You have typed an answer that is too long. Please try again."}):alert("You have typed an answer that is too long. Please try again."),o.obj.otherValue="",o.cancelOther(),!1}},o.cancelOther=function(){o.localChoices[o.localChoices.length-1].checked=!1,o.inputValue=""},o.checkPreviousAnswer(),o.$on("reset-block",function(){console.log("[single-select] reset-block"),o.setBlock(),o.value=o.question.value,o.checkPreviousAnswer()})}}}}]),angular.module("p97.questionTypes").directive("text",["$http","$templateCache","$compile","$sce",function(e,t,n,o){return{template:"",restrict:"EA",scope:{question:"=",value:"=",control:"="},link:function(r,l){if(r.getContentUrl=function(){return r.question.options.widget?BASE_TEMPLATE_URL+"text/templates/"+r.question.options.widget+".html":BASE_TEMPLATE_URL+"text/templates/"+platform+"/text.html"},r.renderHtml=function(e){return o.trustAsHtml(e)},r.question){var a=r.question.options;r.errors=[],r.char_count=0,r.word_count=0,r.internalControl=r.control||{},r.internalControl.validate_answer=function(){if(r.errors=[],null===r.value&&(r.value=""),a.min_word&&r.word_count<a.min_word&&r.errors.push("You must have at least "+a.min_word+" words. You have "+r.word_count),a.max_word){var e=a.max_count||20;r.word_count>e?r.errors.push("You can have up to "+e+" words. You currently have "+r.word_count):r.word_count>a.max_word&&r.errors.push("You can only have "+a.max_word+" words. You have "+r.word_count)}return!a.min_word&&a.min_char&&r.char_count<a.min_char&&r.errors.push("You must have at least "+a.min_char+" characters. You have "+r.char_count),!a.max_word&&a.max_char&&r.char_count>a.max_char&&r.errors.push("You can only have "+a.max_char+" characters. You have "+r.char_count),0===r.errors.length},r.internalControl.clean_answer=function(){},r.$watch("value",function(e){if(e){var t,n=e.length;t=0===n?0:r.value.split(" ").length||0,r.char_count=n,r.word_count=t}}),e.get(r.getContentUrl(),{cache:t}).success(function(e){var t=l.html(e).contents();n(t)(r)})}}}}]),angular.module("p97.questionTypes").directive("integer",["$http","$templateCache","$compile","$sce",function(e,t,n,o){return{template:"",restrict:"EA",scope:{question:"=",value:"=",control:"="},link:function(r,l){if(r.question){var a;isInteger=function(e){return""===e?!1:(y=parseInt(e,10),"number"==typeof y&&e%1===0)},r.setBlock=function(){a=r.question.options,r.errors=[],r.value=r.question.value,r.dummyValue=r.value},r.setBlock(),r.getContentUrl=function(){return r.question.options.widget?BASE_TEMPLATE_URL+"integer/templates/"+r.question.options.widget+".html":BASE_TEMPLATE_URL+"integer/templates/"+platform+"/integer.html"},r.renderHtml=function(e){return o.trustAsHtml(e)},r.internalControl=r.control||{},r.internalControl.validate_answer=function(){if(r.errors=[],(!isInteger(r.value)||null==r.value)&&a.required&&a.required===!0)return r.errors.push("input must be a integer"),!1;if(null!==r.value&&void 0!==r.value){if(!(""===r.value||isInteger(r.value)||a.required&&a.required!==!1))return r.errors.push("input must be a integer"),!1;a.min&&isInteger(a.min)&&r.value<a.min&&r.errors.push("value must not be less than "+a.min),a.max&&isInteger(a.max)&&r.value>a.max&&r.errors.push("value must not be more than "+a.max)}return 0===r.errors.length},r.internalControl.clean_answer=function(){},r.$watch("dummyValue",function(e){r.value=isInteger(e)?parseInt(e):e?e:""}),e.get(r.getContentUrl(),{cache:t}).success(function(e){var t=l.html(e).contents();n(t)(r)}),r.$on("reset-block",function(){console.log("[integer] reset-block"),r.setBlock()})}}}}]),angular.module("p97.questionTypes").directive("email",["$http","$templateCache","$compile","$sce",function(e,t,n,o){return{template:"",restrict:"EA",scope:{question:"=",value:"=",control:"="},link:function(r,l){if(r.question){var a=r.question.options;r.errors=[],r.getContentUrl=function(){return r.question.options.widget?BASE_TEMPLATE_URL+"email/templates/"+r.question.options.widget+".html":BASE_TEMPLATE_URL+"email/templates/"+platform+"/email.html"},r.renderHtml=function(e){return o.trustAsHtml(e)},r.internalControl=r.control||{},r.internalControl.validate_answer=function(){r.errors=[];var e=/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;return!e.test(r.value)&&a.required&&a.required===!0?(r.errors.push("input must be a valid email"),!1):e.test(r.value)||a.required&&a.required!==!1?0===r.errors.length:(r.errors.push("input must be a valid email"),!1)},r.internalControl.clean_answer=function(){},e.get(r.getContentUrl(),{cache:t}).success(function(e){var t=l.html(e).contents();n(t)(r)})}}}}]),angular.module("p97.questionTypes").directive("date",["$http","$templateCache","$compile","$sce",function(e,t,n,o){return{template:"",restrict:"EA",scope:{question:"=",value:"=",control:"="},link:function(r,l){if(r.question){var a=r.question.options,u=/^(19|20)\d{2}$/;r.errors=[],r.getContentUrl=function(){return r.question.options.widget?BASE_TEMPLATE_URL+"date/templates/"+r.question.options.widget+".html":BASE_TEMPLATE_URL+"date/templates/"+platform+"/date.html"},r.renderHtml=function(e){return o.trustAsHtml(e)},r.internalControl=r.control||{},r.internalControl.validate_answer=function(){r.errors=[];var e=a.format;if(convertToDate=function(e){return new Date(e)},a&&a.required===!0&&(null==r.value||""==r.value||void 0==r.value))return r.errors.push("Invalid date format"),!1;if("yyyy"!==e){if(null!==r.value||""!==r.value){if(void 0==r.value)return r.errors.push("Invalid date format"),!1;a.min&&convertToDate(r.value)<convertToDate(a.min)&&r.errors.push("Your selected date is too low"),a.max&&convertToDate(r.value)>convertToDate(a.max)&&r.errors.push("Your selected date is too high")}}else null!==r.value&&void 0!==r.value&&r.value.length>0&&(u.test(r.value)||r.errors.push("Input must be a valid year"),a.min&&u.test(a.min)&&r.value<a.min&&r.errors.push("Year must not be lower than "+a.min),a.max&&u.test(a.max)&&r.value>a.max&&r.errors.push("Year must not be higher than "+a.max));return 0===r.errors.length},r.internalControl.clean_answer=function(){},e.get(r.getContentUrl(),{cache:t}).success(function(e){var t=l.html(e).contents();n(t)(r)})}}}}]),angular.module("p97.questionTypes").directive("phonenumber",["$http","$templateCache","$compile","$sce",function(e,t,n,o){return{template:"",restrict:"EA",scope:{question:"=",value:"=",control:"="},link:function(r,l){if(r.question){var a=r.question.options;r.errors=[];var u=/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,i=/^[0-9 ]+$/;r.getContentUrl=function(){return r.question.options.widget?BASE_TEMPLATE_URL+"phonenumber/templates/"+r.question.options.widget+".html":BASE_TEMPLATE_URL+"phonenumber/templates/"+platform+"/phonenumber.html"},r.renderHtml=function(e){return o.trustAsHtml(e)},r.internalControl=r.control||{},r.internalControl.validate_answer=function(){r.errors=[];a.default||"North America";return a.required&&a.required===!0&&null===r.value?(r.errors.push("This field is required"),!1):(a.format&&"North America"===a.format&&(u.test(r.value)||r.errors.push("input must be a valid North America phonenumber")),a.format&&"International"===a.format&&(i.test(r.value)||r.errors.push("input must be a valid International phonenumber")),0===r.errors.length)},r.internalControl.parse_phone=function(){if(a.format&&"North America"===a.format&&u.test(r.value)){var e="+"+a.country+" "+r.value.replace(u,"$1 $2$3");r.parsed_array=e.split(" ")}if(a.format&&"International"===a.format&&i.test(r.value)){var e="+"+a.country+" "+r.value;r.parsed_array=e.split(" ")}return r.parsed_array},r.internalControl.clean_answer=function(){return r.internalControl.cleaned_value=r.internalControl.parse_phone(),r.internalControl.cleaned_value},e.get(r.getContentUrl(),{cache:t}).success(function(e){var t=l.html(e).contents();n(t)(r)})}}}}]),angular.module("p97.questionTypes").directive("multiSelect",["$http","$templateCache","$compile","$injector","$sce",function(e,t,n,o,r){if(o.has("$ionicPopup"))var l=o.get("$ionicPopup");return{template:"",restrict:"EA",scope:{question:"=",value:"=",control:"="},link:function(o,a){if(o.question){var u=o.question.options,i=/^[A-Za-z\d() _.,-]*$/;o.setBlock=function(){if(o.showOtherInput=!1,o.choicesSelected=0,o.errors=[],o.valueArray=[],o.obj={otherValue:null},o.localChoices=angular.copy(o.question.choices),1===o.question.choices.length&&(o.value=o.question.choices[0].value),u.allow_other>0){var e={verbose:"Other",value:"other"};o.localChoices.push(e)}},o.setBlock(),o.getContentUrl=function(){return o.question.options.widget?BASE_TEMPLATE_URL+"multi-select/templates/"+o.question.options.widget+".html":BASE_TEMPLATE_URL+"multi-select/templates/"+platform+"/toggle-multi.html"},o.renderHtml=function(e){return r.trustAsHtml(e)},o.resetBlock=function(){o.setBlock(),o.value=o.question.value,o.togglePrevAnswers()},o.internalControl=o.control||{},o.internalControl.validate_answer=function(){return o.errors=[],u.required&&u.required===!0&&0===o.value.length&&o.errors.push("This field is required"),u.max_choice&&o.choicesSelected>u.max_choice&&o.errors.push("You can have up to "+u.max_choice+" choices. You currently have "+o.choicesSelected),u.min_choice&&o.choicesSelected<u.min_choice&&o.errors.push("You need at least "+u.min_choice+" choices. You currently have "+o.choicesSelected),o.value.length>0&&_.each(o.value,function(e){i.test(e)?("other"===e&&!o.otherValue||null===o.otherValue)&&o.errors.push("You selected 'Other'. Please fill in a response or type in another choice"):o.errors.push("Your 'Other' input is invalid. Please try again without using special characters or symbols")}),0===o.errors.length},o.internalControl.clean_answer=function(){},o.addChoicesToArray=function(e){o.value&&""!==o.value&&(o.valueArray=o.value);var t=o.valueArray.indexOf(e);t>-1?o.valueArray.splice(t,1):o.valueArray.push(e),o.valueArray.length>0?o.value=o.valueArray:o.value},o.otherInputModal=function(){l.show({template:'<input type="text" ng-model="obj.otherValue">',title:"Other Option",scope:o,subTitle:"Please enter your input below",buttons:[{text:"Cancel",onTap:function(){o.cancelOther()}},{text:"<b>Confirm</b>",type:"button-positive",onTap:function(){if(0==o.otherValueCheck())return!1;var e={verbose:"User Entered: "+o.obj.otherValue,value:o.obj.otherValue,checked:!0};o.localChoices.splice(o.localChoices.length-1,0,e),o.value[o.value.indexOf("other")]=o.obj.otherValue,o.localChoices[o.localChoices.length-1].checked=!1,o.obj.otherValue=""}}]})},o.otherValueCheck=function(){if(o.obj.otherValue.length>0){if(_.contains(o.value,o.obj.otherValue))return l?l.alert({title:"Duplicate Entries",template:"You have typed a duplicate answer. Please try again."}):alert("You have typed a duplicate answer. Please try again."),o.obj.otherValue="",o.cancelOther(),!1;if(o.obj.otherValue.length>u.other_max_length)return l?l.alert({title:"Too long",template:"You have typed an answer that is too long. Please try again."}):alert("You have typed an answer that is too long. Please try again."),o.cancelOther(),!1}},o.$watch("valueArray",function(e){if(e){var t=e.length;o.choicesSelected=t,_.contains(e,"other")&&o.otherInputModal()}},!0),o.togglePrevAnswers=function(){_.each(o.localChoices,function(e){e.checked=!1}),_.each(o.value,function(e){if(choiceValues=_.pluck(o.localChoices,"value"),_.contains(choiceValues,e)){var t=_.find(o.localChoices,function(t){return t.value===e});t.checked=!0}else{var n={verbose:"User Entered: "+e,value:e,checked:!0};o.localChoices.splice(o.localChoices.length-1,0,n)}})},o.cancelOther=function(){o.localChoices[o.localChoices.length-1].checked=!1,o.value=_.compact(_.without(o.value,"other")),o.valueArray=_.compact(_.without(o.valueArray,"other"))},o.togglePrevAnswers(),o.$on("reset-block",function(){console.log("[multi-select] reset-block"),o.resetBlock()}),e.get(o.getContentUrl(),{cache:t}).success(function(e){var t=a.html(e).contents();n(t)(o)})}}}}]),angular.module("p97.questionTypes").directive("toggle",["$http","$templateCache","$compile","$sce",function(e,t,n,o){return{template:"",restrict:"EA",scope:{question:"=",value:"=",control:"="},link:function(r,l){if(r.getContentUrl=function(){return r.question.options.widget?BASE_TEMPLATE_URL+"toggle/templates/"+r.question.options.widget+".html":BASE_TEMPLATE_URL+"toggle/templates/"+platform+"/toggle.html"},r.renderHtml=function(e){return o.trustAsHtml(e)},r.question){var a=r.question.options;r.errors=[],"undefined"!=typeof r.question.value&&(r.localValue=r.question.value),r.internalControl=r.control||{},r.internalControl.validate_answer=function(){return r.value===a.choices.positiveValue||r.value===a.choices.negativeValue?!0:void 0},r.internalControl.clean_answer=function(){},r.$watch("localValue",function(e){r.value=e===!0?a.choices.positiveValue||!0:a.choices.negativeValue||!1}),e.get(r.getContentUrl(),{cache:t}).success(function(e){var t=l.html(e).contents();n(t)(r)})}}}}]),angular.module("p97.questionTypes").directive("autocompleteSearch",["$http","$templateCache","$compile","$sce",function(e,t,n,o){return{template:"",restrict:"EA",scope:{question:"=",value:"=",control:"="},link:function(r,l){if(r.getContentUrl=function(){return r.question.options.widget?BASE_TEMPLATE_URL+"autocomplete-search/templates/"+r.question.options.widget+".html":BASE_TEMPLATE_URL+"autocomplete-search/templates/"+platform+"/autocomplete.html"},r.renderHtml=function(e){return o.trustAsHtml(e)},r.question){var a=r.question.options;r.autocompleteOptions={componentRestrictions:{country:"us"},types:[],stateFilter:a.stateRestrict||[]},r.internalControl=r.control||{},r.internalControl.validate_answer=function(){return r.errors=[],null===r.value&&(r.value=""),!a.required||a.required!==!0||0!==r.value.length&&""!==r.value||r.errors.push("This field is required"),0===r.errors.length},r.internalControl.clean_answer=function(){},e.get(r.getContentUrl(),{cache:t}).success(function(e){var t=l.html(e).contents();n(t)(r)})}}}}]),angular.module("p97.questionTypes").directive("info",["$http","$templateCache","$compile","$sce",function(e,t,n,o){return{template:"",restrict:"EA",scope:{question:"=",value:"=",control:"="},link:function(r,l){if(r.getContentUrl=function(){return r.question.options.widget?BASE_TEMPLATE_URL+"info/templates/"+r.question.options.widget+".html":BASE_TEMPLATE_URL+"info/templates/"+platform+"/info.html"},r.renderHtml=function(e){return o.trustAsHtml(e)},r.question){{r.question.options}r.internalControl=r.control||{},r.internalControl.validate_answer=function(){return r.errors=[],null===r.value&&(r.value=""),0===r.errors.length},r.internalControl.clean_answer=function(){},e.get(r.getContentUrl(),{cache:t}).success(function(e){var t=l.html(e).contents();n(t)(r)})}}}}]);